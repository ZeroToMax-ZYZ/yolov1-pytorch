# 2026-02-08 21:00

> 发现之前的nms不合理，一个grid cell的输出可能会涉及到多个类别，所以进一步修了nms

具体修的思路为把cls只保留最大的，其余的置0

修改nms之后的val结果：
{'map50': 0.38044455647468567, 'map50-95': 0.15592682361602783, 'map_pre_iou': {0.5: 0.38044455647468567, 0.55: 0.3323570191860199, 0.6: 0.278495192527771, 0.65: 0.21879343688488007, 0.7: 0.1634286344051361, 0.75: 0.10821409523487091, 0.8: 0.05566469579935074, 0.85: 0.01902795396745205, 0.9: 0.002632539253681898, 0.95: 0.00021005547023378313}}

修改nms之前的val结果：
{'map50': 0.39963775873184204, 'map50-95': 0.1624610722064972, 'map_pre_iou': {0.5: 0.39963775873184204, 0.55: 0.3474904000759125, 0.6: 0.2900472581386566, 0.65: 0.22792184352874756, 0.7: 0.1694602072238922, 0.75: 0.11086587607860565, 0.8: 0.05701145529747009, 0.85: 0.019302017986774445, 0.9: 0.002663894323632121, 0.95: 0.00021016362006776035}}

# 2026-02-10 12:00
尝试优化了loss，把类别损失加上了softmax